# =============================================================================
# PromptStudio Backend Environment Configuration
# =============================================================================
# Copy this file to .env and update the values for your environment

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
PORT=3001
NODE_ENV=development
# Options: development, staging, production

# Frontend URL for CORS
FRONTEND_URL=http://localhost:3000

# API Base URL (for documentation and webhooks)
API_BASE_URL=http://localhost:3001

# -----------------------------------------------------------------------------
# Database (PostgreSQL with Prisma)
# -----------------------------------------------------------------------------
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/promptstudio?schema=public"

# Connection pool settings (optional)
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# -----------------------------------------------------------------------------
# Redis (for caching and real-time features)
# -----------------------------------------------------------------------------
REDIS_URL="redis://localhost:6379"
REDIS_PASSWORD=""
REDIS_DB=0

# Redis connection settings
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY_MS=1000

# -----------------------------------------------------------------------------
# JWT Authentication
# -----------------------------------------------------------------------------
# IMPORTANT: Change this in production!
JWT_SECRET="your-secret-key-change-in-production-use-at-least-32-chars"
JWT_EXPIRES_IN="7d"
JWT_REFRESH_EXPIRES_IN="30d"

# -----------------------------------------------------------------------------
# AI/LLM API Keys
# -----------------------------------------------------------------------------
# OpenAI
OPENAI_API_KEY="sk-your-openai-api-key"
OPENAI_ORG_ID=""

# Anthropic (Claude)
ANTHROPIC_API_KEY="sk-ant-your-anthropic-api-key"

# Google AI (Gemini)
GOOGLE_AI_API_KEY=""

# Azure OpenAI (optional)
AZURE_OPENAI_API_KEY=""
AZURE_OPENAI_ENDPOINT=""
AZURE_OPENAI_DEPLOYMENT_NAME=""

# -----------------------------------------------------------------------------
# Semantic Cache Settings
# -----------------------------------------------------------------------------
CACHE_TTL_SECONDS=3600
SIMILARITY_THRESHOLD=0.85
CACHE_MAX_ENTRIES=10000
CACHE_CLEANUP_INTERVAL_MS=300000

# -----------------------------------------------------------------------------
# Collaboration Settings
# -----------------------------------------------------------------------------
MAX_USERS_PER_SESSION=50
SESSION_TIMEOUT_MINUTES=60
MAX_SESSIONS_PER_USER=20

# WebSocket settings
WS_PING_TIMEOUT=60000
WS_PING_INTERVAL=25000

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# -----------------------------------------------------------------------------
# File Upload (if applicable)
# -----------------------------------------------------------------------------
MAX_FILE_SIZE_MB=10
ALLOWED_FILE_TYPES="pdf,txt,md,json,yaml,yml"

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
LOG_LEVEL=debug
# Options: error, warn, info, http, verbose, debug, silly

LOG_FORMAT=dev
# Options: dev, combined, common, short, tiny

# Enable request logging
LOG_REQUESTS=true

# -----------------------------------------------------------------------------
# Security
# -----------------------------------------------------------------------------
# Helmet security headers
HELMET_ENABLED=true

# CORS settings
CORS_CREDENTIALS=true
CORS_MAX_AGE=86400

# Content Security Policy
CSP_ENABLED=false

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
ENABLE_SWAGGER_DOCS=true
ENABLE_METRICS=false
ENABLE_HEALTH_CHECKS=true

# Experimental features
ENABLE_RAG=true
ENABLE_CHAINS=true
ENABLE_REASONING=true
ENABLE_REFINEMENT=true

# -----------------------------------------------------------------------------
# Monitoring & Analytics (optional)
# -----------------------------------------------------------------------------
# Sentry
SENTRY_DSN=""

# Prometheus metrics
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9090

# -----------------------------------------------------------------------------
# Email (for notifications, optional)
# -----------------------------------------------------------------------------
SMTP_HOST=""
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=""
SMTP_PASS=""
SMTP_FROM="noreply@promptstudio.dev"

# -----------------------------------------------------------------------------
# External Integrations (optional)
# -----------------------------------------------------------------------------
# Slack
SLACK_WEBHOOK_URL=""

# Discord
DISCORD_WEBHOOK_URL=""

# Webhook for events
WEBHOOK_SECRET=""
